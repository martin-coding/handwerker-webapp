<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Craftnote - Kunden</title>

    <link th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/input_fields_and_icons.css}">
    <script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}" defer></script>
</head>
<body class="app-body bg-body d-flex flex-column min-vh-100">

<!-- Header -->
<div th:insert="~{fragments/header :: siteHeader}"></div>

<main class="flex-grow-1">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h2 class="card-title mb-4"
                            th:text="${client.id == null} ? #{client.new} : #{client.edit}">
                        </h2>

                        <!-- Form for Creating/Editing Clients -->
                        <form th:action="${client.id == null ? '/clients' : '/clients/' + client.id}"
                              th:object="${client}" method="post">

                            <!-- Name -->
                            <div class="mb-3">
                                <label for="name" class="form-label">Name</label>

                                <input
                                        type="text"
                                        id="name"
                                        th:field="*{name}"
                                        class="form-control"
                                        th:classappend="${#fields.hasErrors('name')} ? 'is-invalid'">

                                <div class="invalid-feedback"
                                     th:if="${#fields.hasErrors('name')}"
                                     th:errors="*{name}">
                                </div>
                            </div>

                            <!-- Email -->
                            <div class="mb-3">
                                <label for="email" class="form-label">Email</label>

                                <input
                                        id="email"
                                        th:field="*{email}"
                                        class="form-control"
                                        th:classappend="${#fields.hasErrors('email')} ? 'is-invalid'">

                                <div class="invalid-feedback"
                                     th:if="${#fields.hasErrors('email')}"
                                     th:errors="*{email}">
                                </div>
                            </div>

                            <!-- Phone -->
                            <div class="mb-3">
                                <label for="phone" class="form-label">Phone</label>

                                <input
                                        type="tel"
                                        id="phone"
                                        th:field="*{phone}"
                                        class="form-control"
                                        th:classappend="${#fields.hasErrors('phone')} ? 'is-invalid'">

                                <div class="invalid-feedback"
                                     th:if="${#fields.hasErrors('phone')}"
                                     th:errors="*{phone}">
                                </div>
                            </div>

                            <!-- Street -->
                            <div class="mb-3">
                                <label for="street" class="form-label">Street</label>

                                <input
                                        type="text"
                                        id="street"
                                        th:field="*{address.street}"
                                        class="form-control"
                                        th:classappend="${#fields.hasErrors('address.street')} ? 'is-invalid'">

                                <div class="invalid-feedback"
                                     th:if="${#fields.hasErrors('address.street')}"
                                     th:errors="*{address.street}">
                                </div>
                            </div>

                            <!-- City + Postal Code -->
                            <div class="row">
                                <!-- City -->
                                <div class="col-md-8 mb-3">
                                    <label for="city" class="form-label">City</label>

                                    <input
                                            type="text"
                                            id="city"
                                            th:field="*{address.city}"
                                            class="form-control"
                                            th:classappend="${#fields.hasErrors('address.city')} ? 'is-invalid'">

                                    <div class="invalid-feedback"
                                         th:if="${#fields.hasErrors('address.city')}"
                                         th:errors="*{address.city}">
                                    </div>
                                </div>

                                <!-- Postal Code -->
                                <div class="col-md-4 mb-3">
                                    <label for="postalCode" class="form-label">Postal Code</label>

                                    <input
                                            type="text"
                                            id="postalCode"
                                            th:field="*{address.postalCode}"
                                            class="form-control"
                                            th:classappend="${#fields.hasErrors('address.postalCode')} ? 'is-invalid'">

                                    <div class="invalid-feedback"
                                         th:if="${#fields.hasErrors('address.postalCode')}"
                                         th:errors="*{address.postalCode}">
                                    </div>
                                </div>
                            </div>

                            <!-- Country -->
                            <div class="mb-4">
                                <label for="country" class="form-label">Country</label>

                                <input
                                        type="text"
                                        id="country"
                                        th:field="*{address.country}"
                                        class="form-control"
                                        th:classappend="${#fields.hasErrors('address.country')} ? 'is-invalid'">

                                <div class="invalid-feedback"
                                     th:if="${#fields.hasErrors('address.country')}"
                                     th:errors="*{address.country}">
                                </div>
                            </div>

                            <!-- Buttons -->
                            <div class="d-flex justify-content-between">
                                <a th:text="#{cancel}" th:href="@{/clients}" class="btn btn-outline-secondary"></a>
                                <button type="submit" class="btn btn-primary"
                                        th:text="${client.id == null ? 'Save Client' : 'Update Client'}">
                                </button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Include footer -->
<div th:insert="~{fragments/footer :: siteFooter}"></div>

<script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
</body>
</html>