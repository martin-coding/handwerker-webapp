<!DOCTYPE html>
<html lang="de" class="light" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Mitarbeiter zuweisen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/main.css}">
  <link rel="stylesheet" th:href="@{/css/input_fields_and_icons.css}">
  <link rel="stylesheet" th:href="@{/css/cards.css}">
  <link rel="stylesheet" th:href="@{/css/button.css}">
</head>

<body class="app-body">
<div th:insert="~{fragments/header :: siteHeader}"></div>

<main class="flex-grow-1 app-main">
  <div class="container-xl py-4">
    <div class="d-flex justify-content-between align-items-start gap-3 mb-3">
      <div>
        <h1>Mitarbeiter zuweisen</h1>
        <p class="text-muted mb-0">
          Task: <span th:text="${task.title}">Task Title</span>
          <span class="mx-2">•</span>
          ID: <span th:text="${task.id}">1</span>
        </p>
      </div>
      <div class="d-flex gap-2">
        <a th:href="@{/tasks/{id}(id=${task.id})}" class="btn btn-outline-secondary">Zurück</a>
      </div>
    </div>

    <div class="card form-card">
      <form th:object="${assignmentCreate}"
            th:action="@{/tasks/{taskId}/assignments/add(taskId=${task.id})}"
            method="post" class="p-3">
        <div class="row g-4">
          <div class="col-md-8 input-wrapper">
            <label class="form-label fw-medium">Mitarbeiter</label>
            <select class="input-field input-field-employee"
                    th:field="*{userId}"
                    th:classappend="${#fields.hasErrors('userId')} ? 'is-invalid'">
              <option value="" disabled selected>Bitte wählen...</option>
              <option th:each="u : ${users}"
                      th:value="${u.id}"
                      th:text="${u.lastName} + ', ' + ${u.firstName} + ' (' + ${u.email} + ')'">
              </option>
            </select>
            <div class="invalid-feedback" th:errors="*{userId}"></div>
          </div>

          <div class="col-md-4 input-wrapper">
            <label class="form-label fw-medium">Initiale Minuten</label>
            <input type="number" min="0"
                   class="input-field input-field-employee"
                   th:field="*{initialMinutes}"
                   th:classappend="${#fields.hasErrors('initialMinutes')} ? 'is-invalid'">
            <div class="invalid-feedback" th:errors="*{initialMinutes}"></div>
          </div>
        </div>

        <div class="button-right-orientated mt-3">
          <button type="button" class="btn btn-light me-2" onclick="history.back()">Abbrechen</button>
          <button type="submit" class="btn btn-primary">Zuweisen</button>
        </div>
      </form>
    </div>
  </div>
</main>

<div th:insert="~{fragments/footer :: siteFooter}"></div>
</body>
</html>